@define transform_if() {
    // Find: if ($cond) $then; (brace-less)
    // Replace with: if ($cond) { $then }
    upp.withMatch(upp.root, "if ($cond) $then__NOT_compound_statement;",
        ({ cond, then }) => {
            return upp.code`if (${cond}) { ${then} }`;
        });
}

@transform_if()

int main() {
    if (1) return 0;
    if (2) {
        return 0;
    }
}

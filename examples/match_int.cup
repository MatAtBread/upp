@define transform_int() {
    // Find: int $x = $val;  Replace with: long $x_long = $val;
    // Comment was: "In the future, we might want a 'findAll' API or 'query' that supports match."
    // withMatch IS that API.
    upp.withMatch(upp.root, "int $x = $val;", ({ x, val }) => {
        const name = x.text;
        const v = val.text;
        return upp.code`long ${name}_long = ${val};`;
    });
}

@transform_int()

int foo = 100;
int bar = 200;

int main() { return 0; }

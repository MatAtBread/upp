==== examples/mypkg/main.c ===
/* A minimal C stdio/stdlib for upp to make it easy to
   see the output of the examples but permit compilation
*/
extern int puts(const char *s);
extern int printf(const char *format, ...);
extern int fputs(const char *s, void *stream);
extern void *malloc(unsigned long n);
extern void free(void *p);
extern char *strcpy(char *dest, const char *src);
extern void *stderr;
extern void *_stderr;
#include "mypkg.h"
// This 'add' should NOT be renamed because we are a consumer, not the implementation.
// There is no @implements(mypkg) here.
int add(int a, int b) {
    return (a + b) * 10;
}
int main() {
    int x = add(1, 2); // Should call local add -> 30
    int y = mypkg_add(1, 2); // Should call pkg add -> 3
    printf("Local add: %d\n", x);
    printf("Pkg add: %d\n", y);
    if (x == 30 && y == 3) {
        printf("SUCCESS\n");
        return 0;
    }
    printf("FAILURE\n");
    return 1;
}

==== examples/mypkg/mypkg.c ===
/*@implements(mypkg)*/
#include "mypkg.h"
int mypkg_add(int a, int b) {
    return a + b;
}
int mypkg_sub(int a, int b) {
    return mypkg_add(a, -b);
}
static int helper() {
    return 42;
}
int mypkg_use_helper() {
    return helper();
}

==== examples/mypkg/mypkg.h ===
#include "std/package.h"
extern int mypkg_add(int a, int b);
extern int mypkg_sub(int a, int b);
extern int mypkg_use_helper();

#define TEST 123
extern const char *thing;
==== std/package.h ===



==== RUN OUTPUT ===
Local add: 30
Pkg add: 3
SUCCESS

